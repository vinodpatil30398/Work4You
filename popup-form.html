<!DOCTYPE html>
<html>
<head>
    <style>
        /* Popup styles (same as before) */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        /* Include all other popup styles from previous example */
    </style>
</head>
<body>
    <div class="popup-overlay" id="inquiryPopup">
        <div class="popup-container">
            <button class="popup-close-btn" id="closePopupBtn">&times;</button>
            
            <div class="inquiry-form-container" id="formContainer">
                <div class="inquiry-form">
                    <iframe class="inquiry-form-iframe" 
                            src="https://docs.google.com/forms/d/e/1FAIpQLScoicqxzYpsCdSC5zyBPY54tRjAdqjwWaRMlEWA7xDYuWSqOA/viewform?embedded=true" 
                            frameborder="0" 
                            marginheight="0" 
                            marginwidth="0">Loading...</iframe>
                </div>
            </div>
            
            <div class="thank-you-message" id="thankYouMessage">
                <h2>Thank You!</h2>
                <p>We've received your inquiry and will get back to you soon.</p>
            </div>
        </div>
    </div>

    <script>
        // Function to initialize popup
        function initPopup() {
            const popup = document.getElementById('inquiryPopup');
            const closeBtn = document.getElementById('closePopupBtn');
            const formContainer = document.getElementById('formContainer');
            const thankYouMessage = document.getElementById('thankYouMessage');
            
            // Close functionality
            closeBtn.addEventListener('click', () => {
                popup.style.display = 'none';
                document.body.style.overflow = '';
            });
            
            // Click outside to close
            popup.addEventListener('click', (e) => {
                if (e.target === popup) {
                    popup.style.display = 'none';
                    document.body.style.overflow = '';
                }
            });
            
            // Form submission detection
            window.addEventListener('message', (event) => {
                if (event.origin !== "https://docs.google.com") return;
                if (typeof event.data === 'string' && event.data.includes('FormSubmit')) {
                    formContainer.style.display = 'none';
                    thankYouMessage.style.display = 'block';
                    setTimeout(() => {
                        popup.style.display = 'none';
                        document.body.style.overflow = '';
                    }, 3000);
                }
            });
            
            return {
                show: () => {
                    popup.style.display = 'flex';
                    formContainer.style.display = 'block';
                    thankYouMessage.style.display = 'none';
                    document.body.style.overflow = 'hidden';
                }
            };
        }
        
        // Expose initialization function to window
        window.popupInit = initPopup;
    </script>
</body>
</html>